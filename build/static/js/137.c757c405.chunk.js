(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[137],{1362:function(e,t,a){"use strict";a.r(t);var n=a(13),c=a(14),s=a(16),i=a(15),r=a(0),l=a.n(r),o=a(35),u=a.n(o),d=a(798),m=a(180),p=a(199),h=a(365),f=a(432),v=a(413),g=a(77),E=a.n(g),b=a(25),N=a(872),y=a(79),S=a.n(y),C=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={msg:"",activeUser:null,activeChat:null},e.handleSendMessage=function(t,a,n){n.length>0&&(e.props.sendMessage(t,a,n),e.setState({msg:""}))},e.handleTime=function(e,t){var a=new Date(Date.parse(e)),n=new Date(Date.parse(t));return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate()},e.scrollToBottom=function(){var t=u.a.findDOMNode(e.chatArea);t.scrollTop=t.scrollHeight},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state.activeUser,a=t&&t.uid?t.uid:null,n=t&&t.uid?this.props.chat.chats[a]:null,c=n&&void 0!==n&&n.msg?n.msg.map((function(a,c){return l.a.createElement(l.a.Fragment,{key:c},function(){if(c>0&&!e.handleTime(a.time,n.msg[c-1].time))return l.a.createElement("div",{className:"divider"},l.a.createElement("div",{className:"divider-text"},(new Date).getDate()+" "+(new Date).toLocaleString("default",{month:"short"})))}(),l.a.createElement("div",{className:"chat ".concat(!0!==a.isSent?"chat-left":"chat-right")},c>0?!0===a.isSent&&!0!==n.msg[c-1].isSent?l.a.createElement("div",{className:"chat-avatar"},l.a.createElement("div",{className:"avatar m-0"},l.a.createElement("img",{src:S.a,alt:"chat avatar",height:"40",width:"40"}))):!0!==a.isSent?l.a.createElement("div",{className:"chat-avatar"},l.a.createElement("div",{className:"avatar m-0"},l.a.createElement("img",{src:t.photoURL,alt:"chat avatar",height:"40",width:"40"}))):"":l.a.createElement("div",{className:"chat-avatar"},l.a.createElement("div",{className:"avatar m-0"},l.a.createElement("img",{src:a.isSent?S.a:t.photoURL,alt:"chat avatar",height:"40",width:"40"}))),l.a.createElement("div",{className:"chat-body"},l.a.createElement("div",{className:"chat-content"},a.textContent))))})):null;return l.a.createElement("div",{className:"content-right"},l.a.createElement("div",{className:"chat-app-window"},l.a.createElement("div",{className:"start-chat-area ".concat(null!==t?"d-none":"d-flex")},l.a.createElement("span",{className:"mb-1 start-chat-icon"},l.a.createElement(p.a,{size:50})),l.a.createElement("h4",{className:"py-50 px-1 sidebar-toggle start-chat-text",onClick:function(){if(!1!==e.props.mql.matches)return null;e.props.mainSidebar(!0)}},"Start Conversation")),l.a.createElement("div",{className:"active-chat ".concat(null===t?"d-none":"d-block")},l.a.createElement("div",{className:"chat_navbar"},l.a.createElement("header",{className:"chat_header d-flex justify-content-between align-items-center p-1"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"sidebar-toggle d-block d-lg-none mr-1",onClick:function(){return e.props.mainSidebar(!0)}},l.a.createElement(h.a,{size:24})),l.a.createElement("div",{className:"avatar user-profile-toggle m-0 m-0 mr-1",onClick:function(){return e.props.handleReceiverSidebar("open")}},l.a.createElement("img",{src:null!==t?t.photoURL:"",alt:null!==t?t.displayName:"",height:"40",width:"40"}),l.a.createElement("span",{className:"\n                    ".concat(null!==t&&"do not disturb"===t.status?"avatar-status-busy":null!==t&&"away"===t.status?"avatar-status-away":null!==t&&"offline"===t.status?"avatar-status-offline":"avatar-status-online","\n                    ")})),l.a.createElement("h6",{className:"mb-0"},null!==t?t.displayName:"")),l.a.createElement("span",{className:"favorite",onClick:function(){n&&e.props.togglePinned(t.uid,!n.isPinned)}},l.a.createElement(f.a,{size:22,stroke:n&&!0===n.isPinned?"#FF9F43":"#626262"})))),l.a.createElement(E.a,{className:"user-chats",options:{wheelPropagation:!1},ref:function(t){e.chatArea=t}},l.a.createElement("div",{className:"chats"},c)),l.a.createElement("div",{className:"chat-app-form"},l.a.createElement("form",{className:"chat-app-input d-flex align-items-center",onSubmit:function(a){a.preventDefault(),e.handleSendMessage(t.uid,!1,e.state.msg,t)}},l.a.createElement(d.a,{type:"text",className:"message mr-1 ml-50",placeholder:"Type your message",value:this.state.msg,onChange:function(t){t.preventDefault(),e.setState({msg:t.target.value})}}),l.a.createElement(m.a,{color:"primary"},l.a.createElement(v.a,{className:"d-lg-none",size:15}),l.a.createElement("span",{className:"d-lg-block d-none"},"Send")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.activeUser!==t.activeChat||e.activeChat!==t.activeChat?{activeUser:e.activeUser,activeChat:e.activeChat}:null}}]),a}(l.a.Component);t.default=Object(b.b)((function(e){return{chat:e.chatApp.chats}}),{togglePinned:N.g,sendMessage:N.f})(C)},798:function(e,t,a){"use strict";var n=a(5),c=a(9),s=a(11),i=a(12),r=a(0),l=a.n(r),o=a(1),u=a.n(o),d=a(4),m=a.n(d),p=a(3),h=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],f={children:u.a.node,type:u.a.string,size:u.a.oneOfType([u.a.number,u.a.string]),bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:p.tagPropType,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},v=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(s.a)(a)),a.focus=a.focus.bind(Object(s.a)(a)),a}Object(i.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,s=e.type,i=e.bsSize,r=e.valid,o=e.invalid,u=e.tag,d=e.addon,f=e.plaintext,v=e.innerRef,g=Object(c.a)(e,h),E=["radio","checkbox"].indexOf(s)>-1,b=new RegExp("\\D","g"),N=u||("select"===s||"textarea"===s?s:"input"),y="form-control";f?(y+="-plaintext",N=u||"input"):"file"===s?y+="-file":"range"===s?y+="-range":E&&(y=d?null:"form-check-input"),g.size&&b.test(g.size)&&(Object(p.warnOnce)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=g.size,delete g.size);var S=Object(p.mapToCssModules)(m()(t,o&&"is-invalid",r&&"is-valid",!!i&&"form-control-"+i,y),a);return("input"===N||u&&"function"===typeof u)&&(g.type=s),g.children&&!f&&"select"!==s&&"string"===typeof N&&"select"!==N&&(Object(p.warnOnce)('Input with a type of "'+s+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete g.children),l.a.createElement(N,Object(n.a)({},g,{ref:v,className:S,"aria-invalid":o}))},t}(l.a.Component);v.propTypes=f,v.defaultProps={type:"text"},t.a=v},872:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d}));var n=a(42),c=a.n(n),s=function(){return function(e){c.a.get("api/app/chat/chats").then((function(t){e({type:"GET_CONTACTS",contacts:t.data.contacts,chats:t.data.chats})})).catch((function(e){return console.log(e)}))}},i=function(){return function(e){c.a.get("api/app/chat/chat-contacts").then((function(t){e({type:"GET_CHAT_CONTACTS",chats:t.data})})).catch((function(e){return console.log(e)}))}},r=function(e,t){return function(a){c.a.post("/api/apps/chat/set-pinned/",{contactId:e,value:t}).then((function(n){a({type:"SET_PINNED",id:e,value:t})})).catch((function(e){return console.log(e)}))}},l=function(e,t,a){return a.length>0?function(n){var i={textContent:a,isSent:!0,isSeen:!1,time:(new Date).toString()};c.a.post("/api/app/chat/send-message",{contactId:e,message:i,isPinned:t}).then((function(c){n({type:"SEND_MESSAGE",msg:i,id:e,isPinned:t,text:a}),n(s())})).catch((function(e){return console.log(e)}))}:void 0},o=function(e){return function(t){t({type:"CHANGE_STATUS",status:e})}},u=function(e){return function(t){t({type:"SEARCH_CONTACTS",query:e})}},d=function(e){return function(t){c.a.post("/api/apps/chat/mark-all-seen/",{contactId:e}).then((function(a){t({type:"MARK_AS_SEEN",id:e})})).catch((function(e){return console.log(e)}))}}}}]);
//# sourceMappingURL=137.c757c405.chunk.js.map